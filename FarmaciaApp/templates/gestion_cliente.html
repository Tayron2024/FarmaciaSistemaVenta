{% load static %}
<link rel="stylesheet" href="{% static 'css/base.css' %}">

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interfaz de Cliente</title>
</head>
<body>
    <header>
        <h1>Farmacias SanaSana</h1>
        <nav>
            <a href="/home/">Cerrar Sesión</a>
        </nav>
    </header>

    <div class="container">
        <h2>Explora los diversos medicamentos</h2>
        <p>Explore nuestra selección de medicamentos a continuación:</p>

        <div class="grid">
            <!-- Producto 1: Ibuprofeno -->
            <div class="card">
                <img src="https://www.lasanteca.com/userfiles/2018/12/IBUPROFENO-600MG-CAJA-POR-50-TABLETAS-CON-BLISTER.jpg" alt="Ibuprofeno">
                <h2>Ibuprofeno</h2>
                <p>Alivia el dolor y baja la fiebre.</p>
                <p class="stock">Stock disponible: 150 unidades</p>
                <input type="number" min="1" value="1" id="cantidad-ibuprofeno">
                <button onclick="agregarAlCarrito('Ibuprofeno', 2.50 , 'cantidad-ibuprofeno')">Añadir al Carrito</button>
            </div>

            <!-- Producto 2: Paracetamol -->
            <div class="card">
                <img src="https://boticasperu.pe/media/catalog/product/cache/eebfcecb9382e8d5ccf71e8b2c8cbd30/9/3/9342026280.jpg" alt="Paracetamol">
                <h2>Paracetamol</h2>
                <p>Control del dolor y fiebre.</p>
                <p class="stock">Stock disponible: 200 unidades</p>
                <input type="number" min="1" value="1" id="cantidad-paracetamol">
                <button onclick="agregarAlCarrito('Paracetamol', 2.50, 'cantidad-paracetamol')">Añadir al Carrito</button>
            </div>

            <!-- Producto 3: Amoxicilina -->
            <div class="card">
                <img src="https://www.lasanteca.com/userfiles/2018/12/AMOXICILINA-250MG-5ML-SUSPENCI%E2%80%A1N-100ML-CON-FRASCO.jpg" alt="Amoxicilina">
                <h2>Amoxicilina</h2>
                <p>Antibiótico utilizado para tratar infecciones.</p>
                <p class="stock">Stock disponible: 100 unidades</p>
                <input type="number" min="1" value="1" id="cantidad-amoxicilina">
                <button onclick="agregarAlCarrito('Amoxicilina', 5.00, 'cantidad-amoxicilina')">Añadir al Carrito</button>
            </div>

            <!-- Producto 4: Naproxeno -->
            <div class="card">
                <img src="https://mispastillas.com/wp-content/uploads/2021/05/1201-Naproxeno-500-mg-x-10-tab-GENFAR-mispastillas-tienda-pastillas-medellin-colombia.jpg" alt="Naproxeno">
                <h2>Naproxeno</h2>
                <p>Alivio del dolor muscular y articular.</p>
                <p class="stock">Stock disponible: 180 unidades</p>
                <input type="number" min="1" value="1" id="cantidad-naproxeno">
                <button onclick="agregarAlCarrito('Naproxeno', 4.00, 'cantidad-naproxeno')">Añadir al Carrito</button>
            </div>

            <!-- Producto 5: Loratadina -->
            <div class="card">
                <img src="https://www.lasanteca.com/userfiles/2018/12/LORATADINA-10MG-CAJA-POR-10-TABLETAS-CON-BLISTER.jpg" alt="Loratadina">
                <h2>Loratadina</h2>
                <p>Antihistamínico para el alivio de alergias.</p>
                <p class="stock">Stock disponible: 250 unidades</p>
                <input type="number" min="1" value="1" id="cantidad-loratadina">
                <button onclick="agregarAlCarrito('Loratadina', 3.00, 'cantidad-loratadina')">Añadir al Carrito</button>
            </div>

            <!-- Producto 6: Omeprazol -->
            <div class="card">
                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR_ncpDSgVh_ysSIiRYOl2TmrgyDDumEi54-g&s" alt="Omeprazol">
                <h2>Omeprazol</h2>
                <p>Medicamento para el tratamiento de problemas estomacales.</p>
                <p class="stock">Stock disponible: 120 unidades</p>
                <input type="number" min="1" value="1" id="cantidad-omeprazol">
                <button onclick="agregarAlCarrito('Omeprazol', 6.00, 'cantidad-omeprazol')">Añadir al Carrito</button>
            </div>
        </div>

        <div class="cart" id="carrito">
            <h3>Carrito de Compras</h3>
            <ul id="lista-carrito"></ul>
            <div class="total" id="total-carrito">Total: $0</div>
            <button onclick="window.location.href='/compra/'">Ir al Método de Pago</button>
        </div>
    </div>

    <footer>
        <p>&copy; 2025 Pharmacy. Todos los derechos reservados.</p>
    </footer>

    <script>
        const carrito = [];

        function agregarAlCarrito(producto, precio, inputId) {
            const cantidad = parseInt(document.getElementById(inputId).value);
            const total = precio * cantidad;

            carrito.push({ producto, cantidad, total });

            const totalCompra = carrito.reduce((acc, item) => acc + item.total, 0);
            localStorage.setItem("totalCompra", totalCompra);

            actualizarCarrito();
        }

        function actualizarCarrito() {
            const listaCarrito = document.getElementById("lista-carrito");
            const totalCarrito = document.getElementById("total-carrito");
            listaCarrito.innerHTML = "";

            let total = 0;
            carrito.forEach(item => {
                total += item.total;
                const li = document.createElement("li");
                li.textContent = `${item.producto} - Cantidad: ${item.cantidad}, Total: $${item.total}`;
                listaCarrito.appendChild(li);
            });

            totalCarrito.textContent = `Total: $${total}`;
        }
    </script>
</body>
</html>
